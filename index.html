<!DOCTYPE html>
<html lang="cs">
<head>
	<meta charset="UTF-8">
	<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	<title>HTML Formulář</title>
	<style type="text/css">
	b{
		color:red;
	}
	.obalka{
		border-style: solid;
		border-color: red;
		border-style: solid;
	}
	.lista{
		width: 750px;
		background-color: grey;
	}
	#zadani{
		width: 750px;
	}
	#vrsek{
		height: 140px;
	}
	#spodek{
		width: 750px;
	}
	#vlevo{
		width: 760px;
		float: left;
	}
	#dole{
		width: 750px;
		height: 800px;
		float: none;
	}
	#tlacitka{
		width: 750px;
		height: 50px;
	}
	#vycistit{
		float: right;
		width: 100px;
		height: 25px;
		font-size: 15px;
		font-weight: bold;
	}
	#copy_all{
		float: left;
		width: 150px;
		height: 25px;
		font-size: 15px;
		font-weight: bold;
	}
	.polozka{
		display:none;
	}
		}
	</style>
	<script type="text/javascript">
		function schovej(ktery){
			if ( $("#polozka" + ktery).is( ":hidden")) {
					$("#polozka" + ktery).slideDown(500);
					$("#skryj" + ktery).text("-");
				} else {
					$("#polozka" + ktery).slideUp(500);
					$("#skryj" + ktery).text("+");
				}
		}
	</script>
</head>
<body>
  <form id="zadani">
		<div id="vlevo">
			<div id="vrsek">
		    <b>Podnadpis</b><br>
		    <input type="text" id="podnadpis" size="87" oninput="zpracovani();" tabindex="1">
				<input type="checkbox" id="ch_podnadpis" value="false">
				<input type="button" id="copy_podnadpis" value="Kopírovat" onclick="zkopiruj('podnadpis');"><br>
				<b>Popis</b><br>
				<textarea id="popis" rows="5" cols="89" oninput="zpracovani();" tabindex="2"></textarea><br>
			</div>
			<div id="spodek">
				<div id="polozky">
					<div id="polozka1" style="border-style: solid;">
				    <b>Tučně</b><br>
				    <input type="text" id="tucne1" size="87" oninput="zpracovani();" tabindex="3">
						<input type="checkbox" id="ch_tucne1" value="false"><br>
				    <b>Položky</b><br>
				    <textarea id="odrazky1" rows="15" cols="89" oninput="zpracovani();" tabindex="3"></textarea><br>
					</div>
					<div class="obalka">
						<div id="skryj2" class="lista" onclick="schovej('2');">
							+
						</div>
						<div id="polozka2" class="polozka">
					    <b>Tučně</b><br>
					    <input type="text" id="tucne2" size="87" oninput="zpracovani();" tabindex="3">
							<input type="checkbox" id="ch_tucne2" value="false"><br>
					    <b>Položky</b><br>
					    <textarea id="odrazky2" rows="15" cols="89" oninput="zpracovani();" tabindex="3"></textarea><br>
						</div>

					</div>
					<div class="obalka">
						<div id="skryj3" class="lista" onclick="schovej('3');">
							+
						</div>
						<div id="polozka3" class="polozka">
							<b>Tučně</b><br>
							<input type="text" id="tucne3" size="87" oninput="zpracovani();" tabindex="3">
							<input type="checkbox" id="ch_tucne3" value="false"><br>
							<b>Položky</b><br>
							<textarea id="odrazky3" rows="15" cols="89" oninput="zpracovani();" tabindex="3"></textarea><br>
						</div>

					</div>
					<div class="obalka">
						<div id="skryj4" class="lista" onclick="schovej('4');">
							+
						</div>
						<div id="polozka4" class="polozka">
							<b>Tučně</b><br>
							<input type="text" id="tucne4" size="87" oninput="zpracovani();" tabindex="3">
							<input type="checkbox" id="ch_tucne4" value="false"><br>
							<b>Položky</b><br>
							<textarea id="odrazky4" rows="15" cols="89" oninput="zpracovani();" tabindex="3"></textarea><br>
						</div>

					</div>
					<div class="obalka">
						<div id="skryj5" class="lista" onclick="schovej('5');">
							+
						</div>
						<div id="polozka5" class="polozka">
							<b>Tučně</b><br>
							<input type="text" id="tucne5" size="87" oninput="zpracovani();" tabindex="3">
							<input type="checkbox" id="ch_tucne5" value="false"><br>
							<b>Položky</b><br>
							<textarea id="odrazky5" rows="15" cols="89" oninput="zpracovani();" tabindex="3"></textarea><br>
						</div>

					</div>
				</div>
		    <b>Výstup</b><br>
		    <textarea id="vystup" rows="20" cols="89"></textarea><br>
				<div id="tlacitka">
					<input type="button" id="vycistit" value="Vyčistit" onclick="vycisti();">
					<input type="button" id="copy_all" value="Kopírovat vše" onclick="zkopiruj('vystup');" tabindex="4">
				</div>
			</div>
			<b>Poznámky</b><br>
			<textarea id="ta_poznamky" rows="5" cols="80"></textarea>
		</div>
  </form>
  <script>

		/*
		Prubezne zapisovani do textarea
		*/
		function zpracovani(){
      var vystup="";
      document.getElementById("vystup").value=""
			if (document.getElementById("podnadpis").value!=""){
				document.getElementById("vystup").value+="<h3>"+document.getElementById("podnadpis").value.trim()+"</h3><br />\n";
			}
			if (document.getElementById("popis").value!=""){
				document.getElementById("vystup").value+=document.getElementById("popis").value.trim()+"<br />\n";
			}
			for(i=1; i<=5; i++){
				vystup="";
				var odrazky = document.getElementById("odrazky" + i).value.split("\n");

				/*
	      rozdeleni polozek do pole
	      */
	      odrazky.forEach(polozkovani);
	      function polozkovani(polozka) {
	        if (polozka!=""){
	          vystup+="<li>"+polozka.trim()+"</li>\n";
	        }
	      }

	      /*
	      Zapisovani do textarea
	      */
	      if (document.getElementById("tucne" + i).value!=""){
	        document.getElementById("vystup").value+="<b>"+document.getElementById("tucne" + i).value.trim()+"</b><br />\n";
	      }
	      if (document.getElementById("odrazky" + i).value!=""){
	        document.getElementById("vystup").value+="<ul>\n";
	        document.getElementById("vystup").value+=vystup;
	        document.getElementById("vystup").value+="</ul>\n";
	      }
			}
		}

		/*
		Zkopirovani do schranky
		*/
		function zkopiruj(co) {
			if(co!=""){
				navigator.clipboard.writeText(document.getElementById(co).value).then();
			}
			else {
				navigator.clipboard.writeText(document.getElementById("vystup").value).then();
			}
    }

		/*
		Vycisteni formulare
		*/
		function vycisti(){

			if (document.getElementById("ch_podnadpis").checked==false){
				document.getElementById("podnadpis").value="";
			}
			for(i=1; i<=5; i++){
				if (document.getElementById("ch_tucne" + i).checked==false){
					document.getElementById("tucne" + i).value="";
				}
				document.getElementById("odrazky" + i).value="";
				document.getElementById("vystup").value="";
				document.getElementById("popis").value="";
			}
		}
	</script>
</body>
</html>
